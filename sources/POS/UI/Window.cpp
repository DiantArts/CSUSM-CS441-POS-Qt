///////////////////////////////////////////////////////////////////////////
// Precompilled headers
///////////////////////////////////////////////////////////////////////////
#include <pch.hpp>

///////////////////////////////////////////////////////////////////////////
// Headers
///////////////////////////////////////////////////////////////////////////
#include <POS/UI/Window.hpp>



///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
// Constructors
//
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////
::pos::ui::Window::Window(
    int argc,
    char *argv[],
    ::std::size_t xSize,
    ::std::size_t ySize,
    const ::std::string& name
) noexcept
    : ::QApplication{ argc, argv }
    , m_products{ m_window, 10, 10, xSize / 2 - 10, ySize - 20 }
    , m_deletProductButton{ m_window, m_products, xSize / 2 + 10, 10, 50, 50 }
{
    m_window.setWindowTitle(::QApplication::translate("toplevel", name.c_str()));
    this->resize(xSize, ySize);
    m_window.show();

    m_products.add(::pos::Product{ 1, "slave"s, 10.20f, 1 });
    m_products.add(::pos::Product{ 1, "slave"s, 10.20f, 2 });
}



///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
// Helpers
//
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////
///
///////////////////////////////////////////////////////////////////////////
void ::pos::ui::Window::resize(
    ::std::size_t xSize,
    ::std::size_t ySize
)
{
    m_xSize = xSize;
    m_ySize = ySize;
    m_window.resize(static_cast<int>(m_xSize), static_cast<int>(m_ySize));
}
